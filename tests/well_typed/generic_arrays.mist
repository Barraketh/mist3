"List(true, false)"

comptime def ArrayOps[A: Type] = Struct(get: Func[Int, A], set: Func[Int, A, Unit], print: Func[String], length: Int)

namespace Arrays {
  def makeIntArray(length: Int): ArrayOps[Int] = {
    val arr = intArrayMake(length)
    val get = fn (i: Int) => intArrayGet(arr, i)
    val set = fn (i: Int, value: Int) => intArraySet(arr, i, value)
    val print = fn () => intArrayPrint(arr)
    ArrayOps[Int](get, set, print, length)
  }

  def makeBoolArray(length: Int): ArrayOps[Bool] = {
    val arr = boolArrayMake(length)
    val get = fn (i: Int) => boolArrayGet(arr, i)
    val set = fn (i: Int, value: Bool) => boolArraySet(arr, i, value)
    val print = fn () => boolArrayPrint(arr)
    ArrayOps[Bool](get, set, print, length)
  }

  comptime def makeArray[A: Type]: Func[Int, ArrayOps[A]] = {
    if (A == Int) makeIntArray
    else if (A == Bool) makeBoolArray
    else panic("Don't know how to make an array of this type")
  }

}

def run(): String = {
  val arr = Arrays.makeArray[Bool](2)
  arr.set(0, True)
  arr.set(1, False)
  arr.print()
}